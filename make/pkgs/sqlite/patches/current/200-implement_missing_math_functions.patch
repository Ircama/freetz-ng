--- sqlite3.c.orig
+++ sqlite3.c
@@ -1,3 +1,4 @@
+#include <math.h>
 /******************************************************************************
 ** This file is an amalgamation of many separate C source files from SQLite
 ** version 3.50.4.  By combining all the individual C code files into this
--- sqlite3.c.orig
+++ sqlite3.c
@@ -260486,3 +260487,19 @@
 /* Return the source-id for this library */
 SQLITE_API const char *sqlite3_sourceid(void){ return SQLITE_SOURCE_ID; }
 /************************** End of sqlite3.c ******************************/
+
+/* Implement missing math functions for old uClibc versions (0.9.28/0.9.29) */
+#if defined(SQLITE_ENABLE_MATH_FUNCTIONS)
+#if !defined(__UCLIBC__) || !defined(__UCLIBC_HAS_LONG_DOUBLE_MATH__)
+#ifndef trunc
+double trunc(double x) {
+  return x >= 0.0 ? floor(x) : ceil(x);
+}
+#endif
+#ifndef log2
+double log2(double x) {
+  return log(x) / M_LN2;
+}
+#endif
+#endif
+#endif
