--- numpy/_core/src/umath/string_buffer.h.orig
+++ numpy/_core/src/umath/string_buffer.h
@@ -35,9 +35,10 @@
     STR_LEN,
 };
 
+// Renamed from getchar to avoid conflict with stdio.h macro
 template <ENCODING enc>
 inline npy_ucs4
-getchar(const unsigned char *buf, int *bytes);
+npy_getchar(const unsigned char *buf, int *bytes);
 
 
 template <>
 inline npy_ucs4
-getchar<ENCODING::ASCII>(const unsigned char *buf, int *bytes)
+npy_getchar<ENCODING::ASCII>(const unsigned char *buf, int *bytes)
 {
     *bytes = 1;
     return (npy_ucs4) *buf;
@@ -52,7 +53,7 @@
 
 template <>
 inline npy_ucs4
-getchar<ENCODING::UTF32>(const unsigned char *buf, int *bytes)
+npy_getchar<ENCODING::UTF32>(const unsigned char *buf, int *bytes)
 {
     *bytes = 4;
     return *(npy_ucs4 *)buf;
@@ -60,7 +61,7 @@
 
 template <>
 inline npy_ucs4
-getchar<ENCODING::UTF8>(const unsigned char *buf, int *bytes)
+npy_getchar<ENCODING::UTF8>(const unsigned char *buf, int *bytes)
 {
     Py_UCS4 codepoint;
     *bytes = utf8_char_to_ucs4_code(buf, &codepoint);
@@ -379,7 +380,7 @@
     operator*()
     {
         int bytes;
-        return getchar<enc>((unsigned char *) buf, &bytes);
+        return npy_getchar<enc>((unsigned char *) buf, &bytes);
     }
 
     inline int
