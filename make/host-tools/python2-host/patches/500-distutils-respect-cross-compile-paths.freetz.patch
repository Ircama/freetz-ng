--- Lib/distutils/sysconfig.py
+++ Lib/distutils/sysconfig.py
@@ -19,8 +19,9 @@
 from distutils.errors import DistutilsPlatformError

 # These are needed in a couple of spots, so just compute them once.
-PREFIX = os.path.normpath(sys.prefix)
-EXEC_PREFIX = os.path.normpath(sys.exec_prefix)
+# Respect cross-compilation environment variables if set
+PREFIX = os.environ.get("_python_sysroot", os.path.normpath(sys.prefix))
+EXEC_PREFIX = os.environ.get("_python_sysroot", os.path.normpath(sys.exec_prefix))

 # Path to the base directory of the project. On Windows the binary may
 # live in project/PCBuild9.  If we're dealing with an x64 Windows build,
@@ -80,7 +81,11 @@
     sys.exec_prefix -- i.e., ignore 'plat_specific'.
     """
     if prefix is None:
-        prefix = plat_specific and EXEC_PREFIX or PREFIX
+        # For cross-compilation, override prefix with _PYTHON_SYSROOT
+        if '_PYTHON_SYSROOT' in os.environ:
+            prefix = os.path.join(os.environ['_PYTHON_SYSROOT'], 'usr')
+        else:
+            prefix = plat_specific and EXEC_PREFIX or PREFIX

     if os.name == "posix":
         if python_build:
@@ -477,6 +482,32 @@
             import _osx_support
             _osx_support.customize_config_vars(_config_vars)

+    # Override config vars with environment variables for cross-compilation
+    if _config_vars is not None:
+        old_cc = _config_vars.get('CC')
+        for key in ('CC', 'CXX', 'LD', 'AR', 'RANLIB'):
+            if key in os.environ:
+                _config_vars[key] = os.environ[key]
+
+        ldshared_env = os.environ.get('LDSHARED')
+        if ldshared_env:
+            _config_vars['LDSHARED'] = ldshared_env
+        elif 'CC' in os.environ:
+            new_cc = _config_vars.get('CC')
+            ldshared = _config_vars.get('LDSHARED')
+            if ldshared and old_cc and ldshared.startswith(old_cc):
+                suffix = ldshared[len(old_cc):]
+                _config_vars['LDSHARED'] = new_cc + suffix
+            elif ldshared and new_cc and ldshared.startswith(new_cc):
+                _config_vars['LDSHARED'] = ldshared
+            else:
+                fallback_cc = new_cc or os.environ['CC']
+                _config_vars['LDSHARED'] = fallback_cc + ' -shared'
+
+        for key in ('BLDSHARED', 'LDFLAGS', 'CFLAGS', 'CPPFLAGS'):
+            if key in os.environ:
+                _config_vars[key] = os.environ[key]
+
     if args:
         vals = []
         for name in args:
--- Lib/distutils/unixccompiler.py
+++ Lib/distutils/unixccompiler.py
@@ -227,16 +227,18 @@
         # the configuration data stored in the Python installation, so
         # we use this hack.
         compiler = os.path.basename(sysconfig.get_config_var("CC"))
-        if sys.platform[:6] == "darwin":
+        # Respect cross-compilation target platform if set
+        platform = os.environ.get("_python_host_platform", sys.platform)
+        if platform[:6] == "darwin":
             # MacOSX's linker doesn't understand the -R flag at all
             return "-L" + dir
-        elif sys.platform[:7] == "freebsd":
+        elif platform[:7] == "freebsd":
             return "-Wl,-rpath=" + dir
-        elif sys.platform[:5] == "hp-ux":
+        elif platform[:5] == "hp-ux":
             if self._is_gcc(compiler):
                 return ["-Wl,+s", "-L" + dir]
             return ["+s", "-L" + dir]
-        elif sys.platform[:7] == "irix646" or sys.platform[:6] == "osf1V5":
+        elif platform[:7] == "irix646" or platform[:6] == "osf1V5":
             return ["-rpath", dir]
         elif self._is_gcc(compiler):
             return "-Wl,-R" + dir
