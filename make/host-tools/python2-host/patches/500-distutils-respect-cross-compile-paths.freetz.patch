--- Python-2.7.18.orig/Lib/distutils/sysconfig.py	2025-11-17 14:00:27.823122065 +0100
+++ Python-2.7.18/Lib/distutils/sysconfig.py	2025-11-17 14:01:41.115694620 +0100
@@ -19,8 +19,9 @@
 from distutils.errors import DistutilsPlatformError
 
 # These are needed in a couple of spots, so just compute them once.
-PREFIX = os.path.normpath(sys.prefix)
-EXEC_PREFIX = os.path.normpath(sys.exec_prefix)
+# Respect cross-compilation environment variables if set
+PREFIX = os.environ.get("_python_sysroot", os.path.normpath(sys.prefix))
+EXEC_PREFIX = os.environ.get("_python_sysroot", os.path.normpath(sys.exec_prefix))
 
 # Path to the base directory of the project. On Windows the binary may
 # live in project/PCBuild9.  If we're dealing with an x64 Windows build,
--- Python-2.7.18.orig/Lib/distutils/unixccompiler.py	2025-11-17 14:00:27.823122065 +0100
+++ Python-2.7.18/Lib/distutils/unixccompiler.py	2025-11-17 14:02:18.378938936 +0100
@@ -227,16 +227,18 @@
         # the configuration data stored in the Python installation, so
         # we use this hack.
         compiler = os.path.basename(sysconfig.get_config_var("CC"))
-        if sys.platform[:6] == "darwin":
+        # Respect cross-compilation target platform if set
+        platform = os.environ.get("_python_host_platform", sys.platform)
+        if platform[:6] == "darwin":
             # MacOSX's linker doesn't understand the -R flag at all
             return "-L" + dir
-        elif sys.platform[:7] == "freebsd":
+        elif platform[:7] == "freebsd":
             return "-Wl,-rpath=" + dir
-        elif sys.platform[:5] == "hp-ux":
+        elif platform[:5] == "hp-ux":
             if self._is_gcc(compiler):
                 return ["-Wl,+s", "-L" + dir]
             return ["+s", "-L" + dir]
-        elif sys.platform[:7] == "irix646" or sys.platform[:6] == "osf1V5":
+        elif platform[:7] == "irix646" or platform[:6] == "osf1V5":
             return ["-rpath", dir]
         elif self._is_gcc(compiler):
             return "-Wl,-R" + dir
